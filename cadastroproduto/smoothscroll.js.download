jQuery.extend({smoothScroll:function(){var e,t,o={frameRate:60,animationTime:700,stepSize:120,pulseAlgorithm:!0,pulseScale:10,pulseNormalize:1,accelerationDelta:20,accelerationMax:1,keyboardSupport:!0,arrowScroll:50,touchpadSupport:!0,fixedBackground:!0,excluded:""},a=!1,r=!1,n={x:0,y:0},i=!1,l=document.documentElement,c=[120,120,120],u={left:37,up:38,right:39,down:40,spacebar:32,pageup:33,pagedown:34,end:35,home:36};function s(){if(document.body){var n=document.body,c=document.documentElement,u=window.innerHeight,s=n.scrollHeight;if(l=document.compatMode.indexOf("CSS")>=0?c:n,e=n,function(){var e=!1;if(document.URL.indexOf("google.com/reader/view")>-1&&(e=!0),o.excluded){var r=o.excluded.split(/[,\n] ?/);r.push("mail.google.com");for(var n=r.length;n--;)if(document.URL.indexOf(r[n])>-1){t&&t.disconnect(),D("mousewheel",p),e=!0,a=!0;break}}e&&D("keydown",w),o.keyboardSupport&&!e&&S("keydown",w)}(),i=!0,top!=self)r=!0;else if(s>u&&(n.offsetHeight<=u||c.offsetHeight<=u)){var d=!1,f=function(){d||c.scrollHeight==document.height||(d=!0,setTimeout(function(){c.style.height=document.height+"px",d=!1},500))};if(c.style.height="auto",setTimeout(f,10),(t=new L(f)).observe(n,{attributes:!0,childList:!0,characterData:!1}),l.offsetHeight<=u){var m=document.createElement("div");m.style.clear="both",n.appendChild(m)}}if(document.URL.indexOf("mail.google.com")>-1){var h=document.createElement("style");h.innerHTML=".iu { visibility: hidden }",(document.getElementsByTagName("head")[0]||c).appendChild(h)}else if(document.URL.indexOf("www.facebook.com")>-1){var g=document.getElementById("home_stream");g&&(g.style.webkitTransform="translateZ(0)")}o.fixedBackground||a||(n.style.backgroundAttachment="scroll",c.style.backgroundAttachment="scroll")}}var d=[],f=!1,m=+new Date;function h(e,t,a,r){var i,l;if(r||(r=1e3),i=(i=t)>0?1:-1,l=(l=a)>0?1:-1,(n.x!==i||n.y!==l)&&(n.x=i,n.y=l,d=[],m=0),1!=o.accelerationMax){var c=+new Date-m;if(c<o.accelerationDelta){var u=(1+30/c)/2;u>1&&(u=Math.min(u,o.accelerationMax),t*=u,a*=u)}m=+new Date}if(d.push({x:t,y:a,lastX:t<0?.99:-.99,lastY:a<0?.99:-.99,start:+new Date}),!f){var s=e===document.body,h=function(n){for(var i=+new Date,l=0,c=0,u=0;u<d.length;u++){var m=d[u],p=i-m.start,w=p>=o.animationTime,g=w?1:p/o.animationTime;o.pulseAlgorithm&&(g=E(g));var v=m.x*g-m.lastX>>0,b=m.y*g-m.lastY>>0;l+=v,c+=b,m.lastX+=v,m.lastY+=b,w&&(d.splice(u,1),u--)}s?window.scrollBy(l,c):(l&&(e.scrollLeft+=l),c&&(e.scrollTop+=c)),t||a||(d=[]),d.length?T(h,e,r/o.frameRate+1):f=!1};T(h,e,0),f=!0}}function p(t){i||s();var a=t.target,r=x(a);if(!r||t.defaultPrevented||H(e,"embed")||H(a,"embed")&&/\.pdf/i.test(a.src))return!0;var n=t.wheelDeltaX||0,l=t.wheelDeltaY||0;if(n||l||(l=t.wheelDelta||0),!o.touchpadSupport&&function(e){if(e){e=Math.abs(e),c.push(e),c.shift(),clearTimeout(b);var t=c[0]==c[1]&&c[1]==c[2],o=M(c[0],120)&&M(c[1],120)&&M(c[2],120);return!(t||o)}}(l))return!0;Math.abs(n)>1.2&&(n*=o.stepSize/120),Math.abs(l)>1.2&&(l*=o.stepSize/120),h(r,-n,-l),t.preventDefault()}function w(t){var a=t.target,r=t.ctrlKey||t.altKey||t.metaKey||t.shiftKey&&t.keyCode!==u.spacebar;if(/input|textarea|select|embed/i.test(a.nodeName)||a.isContentEditable||t.defaultPrevented||r)return!0;if(H(a,"button")&&t.keyCode===u.spacebar)return!0;var n=0,i=0,l=x(e),c=l.clientHeight;switch(l==document.body&&(c=window.innerHeight),t.keyCode){case u.up:i=-o.arrowScroll;break;case u.down:i=o.arrowScroll;break;case u.spacebar:i=-(t.shiftKey?1:-1)*c*.9;break;case u.pageup:i=.9*-c;break;case u.pagedown:i=.9*c;break;case u.home:i=-l.scrollTop;break;case u.end:var s=l.scrollHeight-l.scrollTop-c;i=s>0?s+10:0;break;case u.left:n=-o.arrowScroll;break;case u.right:n=o.arrowScroll;break;default:return!0}h(l,n,i),t.preventDefault()}var g={};setInterval(function(){g={}},1e4);var v,b,y=(v=0,function(e){return e.uniqueID||(e.uniqueID=v++)});function k(e,t){for(var o=e.length;o--;)g[y(e[o])]=t;return t}function x(e){var t=[],o=l.scrollHeight;do{var a=g[y(e)];if(a)return k(t,a);if(t.push(e),o===e.scrollHeight){if(!r||l.clientHeight+10<o)return k(t,document.body)}else if(e.clientHeight+10<e.scrollHeight&&(overflow=getComputedStyle(e,"").getPropertyValue("overflow-y"),"scroll"===overflow||"auto"===overflow))return k(t,e)}while(e=e.parentNode)}function S(e,t,o){window.addEventListener(e,t,o||!1)}function D(e,t,o){window.removeEventListener(e,t,o||!1)}function H(e,t){return(e.nodeName||"").toLowerCase()===t.toLowerCase()}function M(e,t){return Math.floor(e/t)==e/t}var T=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(e,t,o){window.setTimeout(e,o||1e3/60)},L=window.MutationObserver||window.WebKitMutationObserver;function C(e){var t,a;return(e*=o.pulseScale)<1?t=e-(1-Math.exp(-e)):(e-=1,t=(a=Math.exp(-1))+(1-Math.exp(-e))*(1-a)),t*o.pulseNormalize}function E(e){return e>=1?1:e<=0?0:(1==o.pulseNormalize&&(o.pulseNormalize/=C(1)),C(e))}S("mousedown",function(t){e=t.target}),S("mousewheel",p),S("load",s)}});